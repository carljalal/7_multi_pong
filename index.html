<html>
<body>
<script>



// put div for instructions
instructionsDiv = document.createElement("div");
document.body.append(instructionsDiv);
instructionsDiv.innerHTML = "Welcome to Multi Pong!";

// start button
startButton = document.createElement("button");
document.body.append(startButton);
startButton.innerText = "Start!";


// stop button
stopButton = document.createElement("button");
document.body.append(stopButton);
stopButton.innerText = "Stop!";



// put all options settings (radios, slider, textboxes, buttons)
defaultBallSpeed = 1;
defaultUpdateSpeed = 10;
defaultCanvasHeight = "500px";
defaultCanvasWidth =  "500px";
paddleSelected = null;



// put canvas
canvasElement = document.createElement("canvas");
document.body.append(canvasElement);
canvasElement.style.width = defaultCanvasWidth;
canvasElement.style.height= defaultCanvasHeight;
ctx = canvasElement.getContext("2d");


// put global variables
balls    = [{},{},{}]
walls    = [{},{},{},{},{}]
paddles  = [{},{},{},{}]
oobAreas = [{},{},{},{}]




// put timerloop
mainLoop = () => {

}
setInterval(mainLoop, defaultUpdateSpeed);


// intersects bounding box
pointIntersectsBox = (x, y, box) => {
    if (x >= box.minX && x <= box.maxX && y >= box.minY && y <= box.maxY) {
        return true;
    }
    else return false;
}

boxIntersectsBox = (box1, box2) => {
    if (box1.maxX < box2.minX || box1.minX > box2.maxX || box1.maxY < box2.minY || box1.minY > box2.maxY) {
        return false;
    }
    else return true;
}



// paddle intersect
cursorPaddleIntersect = (cursorX,cursorY) => {
    // loop check bounding box
    paddles.forEach(paddle, index => {
        // check cursor in bounding box
        if (pointIntersectsBox(paddle,cursorX,cursorY)){
            paddleSelected = index;
        }
    });
}


// move direction functions
moveLeft = (object, amount=1) => {
    object.x -= amount;
    refreshBoundingBox(object);
}

moveRight = (object, amount=1) => {
    object.x += amount;
    refreshBoundingBox(object);
}

moveUp = (object, amount=1) => {
    object.y -= amount;
    refreshBoundingBox(object);
}

moveDown = (object, amount=1) => {
    object.x += amount;
    refreshBoundingBox(object);
}



// set bounding box
refreshBoundingBox = (object) => {
    object.minX = object.x - object.radiusHorizontal;
    object.maxX = object.x + object.radiusHorizontal;

    object.minY = object.y - object.radiusVertical;
    object.maxY = object.y + object.radiusVertical;
}


// put collision logic
collisionUpdate = () => {
    // loop balls
    balls.forEach(ball => {
        // inner loop walls
        walls.forEach(wall => {
            if (boxIntersectsBo)
        })

        // inner loop paddles
        paddles.forEach(paddle => {

        })

        // inner loop out of bounds areas
        oobArea.forEach(area => {

        })
    });
}

// simple draw
drawRect = (object) => {
    ctx.fillStyle = object.color;
    ctx.fillRect(object.minX, object.minY, object.maxX - object.minX, object.maxY - object.minY);
}




// put canvas draw calls
updateGraphics = () => {
    // clear canvas
    ctx.clearRect(0,0,canvasElement.width,canvasElement.height);
    
    // draw balls

    
    // draw walls


    // draw paddles


}



// put click logic -- paddle movement commands
canvasElement.onClick = () => {
    // switch between
    
    // paddle select

    // paddle move


}

// put keypress logic -- paddle movement commands
canvasElement.onkeydown = (event) => {
    if (paddleSelected != null) {
        return;
    }
    else {
        if(event.key == "ArrowLeft"  ) paddle[paddleSelected].moveLeft();
        if(event.key == "ArrowRight" ) paddle[paddleSelected].moveRight();
        if(event.key == "ArrowUp"    ) paddle[paddleSelected].moveRight();
        if(event.key == "ArrowDown"  ) paddle[paddleSelected].moveRight();
    }
}



// put settings logic




</script>
</body>
</html>